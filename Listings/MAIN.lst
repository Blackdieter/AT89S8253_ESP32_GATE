A51 MACRO ASSEMBLER  MAIN                                                                 11/07/2024 01:35:14 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\MAIN.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE MAIN.A SET(SMALL) DEBUG PRINT(.\Listings\MAIN.lst) OBJECT(.\Objects\MAI
                      N.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;
                       2     ; Hien mot so
                       3     ; start
                       4     ;
                       5     
  0080                 6     data_7seg equ p0
  00A2                 7     led1 bit p2.2
  00A3                 8     led2 bit p2.3
  00B2                 9     button bit p3.2  ; Define button input
0000                  10     org 00h
0000                  11     main: 
0000 90001F           12         mov dptr,#ma7seg    ; Initialize DPTR with the address of ma7seg
0003 C2A3             13         clr led2            ; Disable 7seg no2
0005 E4               14         clr a
0006 93               15         movc a,@a+dptr
0007 F580             16         mov data_7seg,a     ; Display initial value (0)
0009 D2B2             17         setb button         ; Set button as input
000B 8000             18         sjmp loop           ; Jump to loop
                      19     
000D                  20     loop:
000D 30B202           21         jnb button,increment ; If button is pressed, jump to increment
0010 80FB             22         sjmp loop           ; Otherwise, keep looping
                      23     
0012                  24     increment:
0012 A3               25         inc dptr            ; Increment DPTR to point to the next value
0013 E4               26         clr a
0014 93               27         movc a,@a+dptr
0015 F580             28         mov data_7seg,a     ; Display the next value
0017 B490F3           29         cjne a,#0x90,loop   ; If the value is not 0x90 (9), go back to loop
001A 90001F           30         mov dptr,#ma7seg    ; Reset DPTR to the start of ma7seg
001D 80EE             31         sjmp loop           ; Go back to loop
                      32     
001F                  33     ma7seg:
001F C0F9A4B0         34         db 0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90 
0023 999282F8                
0027 8090                    
                      35     end 
A51 MACRO ASSEMBLER  MAIN                                                                 11/07/2024 01:35:14 PAGE     2

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BUTTON . . . . . .  B ADDR   00B0H.2 A   
DATA_7SEG. . . . .  D ADDR   0080H   A   
INCREMENT. . . . .  C ADDR   0012H   A   
LED1 . . . . . . .  B ADDR   00A0H.2 A   
LED2 . . . . . . .  B ADDR   00A0H.3 A   
LOOP . . . . . . .  C ADDR   000DH   A   
MA7SEG . . . . . .  C ADDR   001FH   A   
MAIN . . . . . . .  C ADDR   0000H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
